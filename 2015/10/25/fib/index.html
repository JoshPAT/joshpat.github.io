<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>åœ¨Pythonä¸­è§£å†³Fibé—®é¢˜çš„å¤šç§æ–¹æ³• | Yesterday&#39;s Byte</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="é—®é¢˜ç”±æ¥ä¼ è¯´åœ¨åå­—å†›ä¸œå¾çš„æŸä¸€å¤©æ™šä¸Šï¼Œç½—é©¬çš„å¤§ä¸»æ•™åœ¨åšäº†ä¸€ä¸ªæ¢¦ï¼Œ æ¢¦ä¸­å¤©ä½¿åŠ é‡Œåˆ—å’Œä»–è¯´ï¼šæ‰¾åˆ°æ‰€æœ‰ä¼šæ•°å­¦çš„æ–‡åŒ–äººï¼Œç‰¹åˆ«æ˜¯é‚£ä¸ªå«Fibonacciã€‚ä½ ä»¬å¿…é¡»ç®—å‡ºç¬¬ä¸€ç™¾ä¸‡ä¸ªFibonacciæ•°æ˜¯ä»€ä¹ˆï¼Œä¸ç„¶çš„è¯åå­—å†›åœ¨ä¸­ä¸œå°±ä¼šè¢«ç©†æ–¯æ—å“¥å“¥å›¢ç­ã€‚è¿™æ˜¯ä¸Šå¸å¤§äººçš„æ„æ€ã€‚è¯´å®Œï¼Œå¤§å¤©ä½¿æ¶ˆå¤±ï¼Œæ•™çš‡ä¹Ÿé†’äº†ã€‚æ•™çš‡å¿ƒæƒ³ï¼šå–”å“¦ï¼Œå¤©é™å¤§ä»»äºæ–¯äººä¹Ÿï¼Œå¿…å°†è‹¦å…¶å¿ƒå¿—â€¦ï¼ˆæˆ‘çè¯´çš„ï¼‰ã€‚æ•™çš‡å¿ƒæƒ³ï¼šä¸€ç™¾ä¸‡æ˜¯å¤šå°‘ï¼Ÿ">
<meta property="og:type" content="article">
<meta property="og:title" content="åœ¨Pythonä¸­è§£å†³Fibé—®é¢˜çš„å¤šç§æ–¹æ³•">
<meta property="og:url" content="http://yoursite.com/2015/10/25/fib/index.html">
<meta property="og:site_name" content="Yesterday's Byte">
<meta property="og:description" content="é—®é¢˜ç”±æ¥ä¼ è¯´åœ¨åå­—å†›ä¸œå¾çš„æŸä¸€å¤©æ™šä¸Šï¼Œç½—é©¬çš„å¤§ä¸»æ•™åœ¨åšäº†ä¸€ä¸ªæ¢¦ï¼Œ æ¢¦ä¸­å¤©ä½¿åŠ é‡Œåˆ—å’Œä»–è¯´ï¼šæ‰¾åˆ°æ‰€æœ‰ä¼šæ•°å­¦çš„æ–‡åŒ–äººï¼Œç‰¹åˆ«æ˜¯é‚£ä¸ªå«Fibonacciã€‚ä½ ä»¬å¿…é¡»ç®—å‡ºç¬¬ä¸€ç™¾ä¸‡ä¸ªFibonacciæ•°æ˜¯ä»€ä¹ˆï¼Œä¸ç„¶çš„è¯åå­—å†›åœ¨ä¸­ä¸œå°±ä¼šè¢«ç©†æ–¯æ—å“¥å“¥å›¢ç­ã€‚è¿™æ˜¯ä¸Šå¸å¤§äººçš„æ„æ€ã€‚è¯´å®Œï¼Œå¤§å¤©ä½¿æ¶ˆå¤±ï¼Œæ•™çš‡ä¹Ÿé†’äº†ã€‚æ•™çš‡å¿ƒæƒ³ï¼šå–”å“¦ï¼Œå¤©é™å¤§ä»»äºæ–¯äººä¹Ÿï¼Œå¿…å°†è‹¦å…¶å¿ƒå¿—â€¦ï¼ˆæˆ‘çè¯´çš„ï¼‰ã€‚æ•™çš‡å¿ƒæƒ³ï¼šä¸€ç™¾ä¸‡æ˜¯å¤šå°‘ï¼Ÿ">
<meta property="og:image" content="http://yoursite.com/img/fib.jpg">
<meta property="og:updated_time" content="2015-10-25T12:29:11.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="åœ¨Pythonä¸­è§£å†³Fibé—®é¢˜çš„å¤šç§æ–¹æ³•">
<meta name="twitter:description" content="é—®é¢˜ç”±æ¥ä¼ è¯´åœ¨åå­—å†›ä¸œå¾çš„æŸä¸€å¤©æ™šä¸Šï¼Œç½—é©¬çš„å¤§ä¸»æ•™åœ¨åšäº†ä¸€ä¸ªæ¢¦ï¼Œ æ¢¦ä¸­å¤©ä½¿åŠ é‡Œåˆ—å’Œä»–è¯´ï¼šæ‰¾åˆ°æ‰€æœ‰ä¼šæ•°å­¦çš„æ–‡åŒ–äººï¼Œç‰¹åˆ«æ˜¯é‚£ä¸ªå«Fibonacciã€‚ä½ ä»¬å¿…é¡»ç®—å‡ºç¬¬ä¸€ç™¾ä¸‡ä¸ªFibonacciæ•°æ˜¯ä»€ä¹ˆï¼Œä¸ç„¶çš„è¯åå­—å†›åœ¨ä¸­ä¸œå°±ä¼šè¢«ç©†æ–¯æ—å“¥å“¥å›¢ç­ã€‚è¿™æ˜¯ä¸Šå¸å¤§äººçš„æ„æ€ã€‚è¯´å®Œï¼Œå¤§å¤©ä½¿æ¶ˆå¤±ï¼Œæ•™çš‡ä¹Ÿé†’äº†ã€‚æ•™çš‡å¿ƒæƒ³ï¼šå–”å“¦ï¼Œå¤©é™å¤§ä»»äºæ–¯äººä¹Ÿï¼Œå¿…å°†è‹¦å…¶å¿ƒå¿—â€¦ï¼ˆæˆ‘çè¯´çš„ï¼‰ã€‚æ•™çš‡å¿ƒæƒ³ï¼šä¸€ç™¾ä¸‡æ˜¯å¤šå°‘ï¼Ÿ">
<meta name="twitter:image" content="http://yoursite.com/img/fib.jpg">
  
    <link rel="alternative" href="/atom.xml" title="Yesterday&#39;s Byte" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="https://en.gravatar.com/userimage/87177847/9f41bd8145e833e43ab4594f2bbd9c7c.jpg?size=200" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Zhou Quan</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>èœå•</li>
						<li>æ ‡ç­¾</li>
						
						
						<li>å…³äºæˆ‘</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">ä¸»é¡µ</a></li>
				        
							<li><a href="/archives">æ‰€æœ‰æ–‡ç« </a></li>
				        
							<li><a href="/instagram">ç›¸å†Œ</a></li>
				        
							<li><a href="/plots">å¯è§†åŒ–æ•°æ®</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/zh0uquan" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="https://weibo.com/u/3503482562" title="weibo">weibo</a>
					        
								<a class="facebook" target="_blank" href="https://www.facebook.com/quan.zhou.102" title="facebook">facebook</a>
					        
								<a class="douban" target="_blank" href="/" title="douban">douban</a>
					        
								<a class="mail" target="_blank" href="/zhouquan0x16@gmail.com" title="mail">mail</a>
					        
								<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/quan-zhou-960994134/" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Design-Pattern/" style="font-size: 10px;">Design Pattern</a> <a href="/tags/Multipath-TCP/" style="font-size: 10px;">Multipath TCP</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/algorithm/" style="font-size: 10px;">algorithm</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/performance/" style="font-size: 10px;">performance</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/æ‚è°ˆ/" style="font-size: 10px;">æ‚è°ˆ</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">Hi. I&#39;m a developer from China.Mainly developed Python, occasionally with Javascript. I did my master in Europe, focus on Computer Networks and Distrubuted Systems. My spare time is manily about video games, sometimes ski, also movies and tv-series.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Zhou Quan</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://en.gravatar.com/userimage/87177847/9f41bd8145e833e43ab4594f2bbd9c7c.jpg?size=200" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Zhou Quan</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/archives">æ‰€æœ‰æ–‡ç« </a></li>
		        
					<li><a href="/instagram">ç›¸å†Œ</a></li>
		        
					<li><a href="/plots">å¯è§†åŒ–æ•°æ®</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/zh0uquan" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="https://weibo.com/u/3503482562" title="weibo">weibo</a>
			        
						<a class="facebook" target="_blank" href="https://www.facebook.com/quan.zhou.102" title="facebook">facebook</a>
			        
						<a class="douban" target="_blank" href="/" title="douban">douban</a>
			        
						<a class="mail" target="_blank" href="/zhouquan0x16@gmail.com" title="mail">mail</a>
			        
						<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/quan-zhou-960994134/" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-fib" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/25/fib/" class="article-date">
  	<time datetime="2015-10-25T00:13:20.000Z" itemprop="datePublished">2015-10-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      åœ¨Pythonä¸­è§£å†³Fibé—®é¢˜çš„å¤šç§æ–¹æ³•
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/performance/">performance</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      

        <!-- Table of Contents -->
        
          <div id="toc" class="toc-article">
            <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#é—®é¢˜ç”±æ¥"><span class="toc-number">1.</span> <span class="toc-text">é—®é¢˜ç”±æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è§£å†³æ–¹æ³•"><span class="toc-number">2.</span> <span class="toc-text">è§£å†³æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸå§‹é€’å½’"><span class="toc-number">2.1.</span> <span class="toc-text">åŸå§‹é€’å½’</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸå§‹é€’æ¨"><span class="toc-number">2.2.</span> <span class="toc-text">åŸå§‹é€’æ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è£…é¥°å™¨é€’æ¨"><span class="toc-number">2.3.</span> <span class="toc-text">è£…é¥°å™¨é€’æ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç®€å•ç²—æš´çš„å…¬å¼æ³•"><span class="toc-number">2.4.</span> <span class="toc-text">ç®€å•ç²—æš´çš„å…¬å¼æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#çº¿æ€§ä»£æ•°"><span class="toc-number">2.5.</span> <span class="toc-text">çº¿æ€§ä»£æ•°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æµ‹è¯•"><span class="toc-number">3.</span> <span class="toc-text">æµ‹è¯•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åè®°"><span class="toc-number">4.</span> <span class="toc-text">åè®°</span></a></li></ol>
          </div>
        
        
        <p><img src="/img/fib.jpg" alt="pope"></p>
<h3 id="é—®é¢˜ç”±æ¥">é—®é¢˜ç”±æ¥</h3><p>ä¼ è¯´åœ¨åå­—å†›ä¸œå¾çš„æŸä¸€å¤©æ™šä¸Šï¼Œç½—é©¬çš„å¤§ä¸»æ•™åœ¨åšäº†ä¸€ä¸ªæ¢¦ï¼Œ æ¢¦ä¸­å¤©ä½¿åŠ é‡Œåˆ—å’Œä»–è¯´ï¼š<code>æ‰¾åˆ°æ‰€æœ‰ä¼šæ•°å­¦çš„æ–‡åŒ–äººï¼Œç‰¹åˆ«æ˜¯é‚£ä¸ªå«Fibonacciã€‚ä½ ä»¬å¿…é¡»ç®—å‡ºç¬¬ä¸€ç™¾ä¸‡ä¸ªFibonacciæ•°æ˜¯ä»€ä¹ˆï¼Œä¸ç„¶çš„è¯åå­—å†›åœ¨ä¸­ä¸œå°±ä¼šè¢«ç©†æ–¯æ—å“¥å“¥å›¢ç­ã€‚è¿™æ˜¯ä¸Šå¸å¤§äººçš„æ„æ€ã€‚</code>è¯´å®Œï¼Œå¤§å¤©ä½¿æ¶ˆå¤±ï¼Œæ•™çš‡ä¹Ÿé†’äº†ã€‚æ•™çš‡å¿ƒæƒ³ï¼šå–”å“¦ï¼Œå¤©é™å¤§ä»»äºæ–¯äººä¹Ÿï¼Œå¿…å°†è‹¦å…¶å¿ƒå¿—â€¦ï¼ˆæˆ‘çè¯´çš„ï¼‰ã€‚æ•™çš‡å¿ƒæƒ³ï¼šä¸€ç™¾ä¸‡æ˜¯å¤šå°‘ï¼Ÿ</p>
<a id="more"></a>
<p>è¦çŸ¥é“ï¼Œé‚£æ—¶å€™æ¬§æ´²è¿˜é‡‡ç”¨ç½—é©¬æ•°å­—ï¼Œè€Œç½—é©¬æ•°å­—æ˜¯æ²¡æœ‰åŠ å‡è¿ç®—çš„ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Œå› ä¸ºç½—é©¬æ•°å­—é‡Œé¢æ˜¯æ²¡æœ‰<code>é›¶</code>çš„ï¼Œæ²¡æœ‰äº†é›¶ï¼Œå¤§å®¶æ€ä¹ˆåšåŠ å‡å‘¢ï¼Œæ²¡é”™å°±æ˜¯å¹¼å„¿å›­çš„ç”¨çš„æ‰‹æŒ‡å¤´è®¡æ•°ã€‚è€Œä¸”ï¼Œæœ‰ä¸ªå¤§å­¦å£«åœ¨ç½—é©¬æ•°å­—ä¸­å¼€å‘äº†<code>é›¶</code>åè¿˜å†™äº†ä¸€å †è®ºæ–‡æ¥è®ºè¯ç”¨<code>é›¶</code>æ¥ç®€æ˜“è®¡æ•°çš„æ–¹æ³•ã€‚å–”å“¦ï¼Œç„¶å¹¶åµï¼Œç½—é©¬æ•™ä¼šçœ‹åˆ°åè¯´ï¼Œç½—é©¬æ•°å­—æ˜¯å®Œç¾ç¥åœ£çš„ï¼Œä¸å¯åŠ å…¥è¿™ä¸ªé‚ªæ¶çš„<code>é›¶</code>ï¼Œäºæ˜¯<code>é›¶</code>å’Œè¿™ä¸ªäººå°±ç›´æ¥è¢«ç®€å•ç²—æš´çš„çƒ§çƒ§çƒ§çƒ§æ­»äº†ã€‚</p>
<p>æ•™çš‡å†·é™äº†ä¸€ä¸‹ï¼Œæ©ï¼Œå¿ƒæƒ³åˆ°ï¼šä¸Šå¸æ€ä¹ˆä¼šè¿™æ ·è€ƒéªŒæˆ‘ï¼ˆä¸€ä¸ªæ•°å­¦ä¸å¥½çš„äººï¼‰ï¼Œè¿™ä¸€å®šæ˜¯æ¶é­”ğŸ‘¿ã€‚ç¡è§‰å…ˆã€‚</p>
<p>æ©ï¼Œæ¥ä¸‹æ¥ï¼Œä¸Šå¸ä¸å¼€å¿ƒäº†ã€‚è¯·è½¬æ’­è¨æ‹‰ä¸å¤§å¸å¦‚ä½•å¤§ç ´åœ£åå­—å†›ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h3><p>okã€‚ä»Šå¤©ï¼Œæˆ‘å‡†å¤‡è®²ä¸‹ç”¨pythonæ¥è§£è¿™é“é¢˜çš„åŸºæœ¬æ€è·¯ã€‚</p>
<p>é¦–å…ˆï¼Œæœ€åŸºæœ¬çš„é€’å½’ç®—æ³•ï¼Œè¿™åº”è¯¥æ˜¯æ‰€æœ‰åˆå­¦ç®—æ³•é‡Œé¢æœ€å¸¸è§çš„ä¸€ç§ã€‚</p>
<h4 id="åŸå§‹é€’å½’">åŸå§‹é€’å½’</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">return</span> n <span class="keyword">if</span> n <span class="keyword">in</span> [<span class="number">0</span>, <span class="number">1</span>] <span class="keyword">else</span> fib(n<span class="number">-2</span>) + fib(n<span class="number">-1</span>)</div></pre></td></tr></table></figure>
<p>è¿™ç§ç®—æ³•éå¸¸ä½æ•ˆï¼Œå› ä¸ºæ¯æ¬¡éƒ½æœ‰ç®—ä¸€éå‰fib(n)çš„å€¼ã€‚</p>
<h4 id="åŸå§‹é€’æ¨">åŸå§‹é€’æ¨</h4><p>é‚£ä¹ˆäºæ˜¯æœ‰äº†åŸºäºå®ƒçš„ä¼˜åŒ–ç®—æ³•ï¼šç”¨<code>é€’æ¨</code>æ¥ä»£æ›¿<code>é€’å½’</code>ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib_1</span><span class="params">(n)</span>:</span></div><div class="line">    a, b = <span class="number">0</span>, <span class="number">1</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> xrange(n):</div><div class="line">        a, b = b, a + b</div><div class="line">    <span class="keyword">return</span> a</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€èˆ¬æ˜¯æœ€ä¼˜åŒ–çš„fibç®—æ³•äº†ï¼ŒåŒ…æ‹¬pythonè‡ªå·±çš„æ–‡æ¡£Modulesé‡Œé¢ä¹Ÿæ˜¯è¿™ä¸ªæ€è·¯ã€‚</p>
<h4 id="è£…é¥°å™¨é€’æ¨">è£…é¥°å™¨é€’æ¨</h4><p>ä½†æ˜¯ä¸å¾—ä¸æä¸€ä¸‹ç½‘ä¸Šåˆ©ç”¨pythonè‡ªèº«è¯­è¨€ç‰¹æ€§ï¼Œç”¨è£…é¥°å™¨æ¥ä¼˜åŒ–ä¹‹å‰çš„<code>é€’å½’</code>ç®—æ³•çš„ã€‚<a href="http://ujihisa.blogspot.fr/2010/11/memoized-recursive-fibonacci-in-python.html" target="_blank" rel="external">å‚çœ‹</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">memorize</span><span class="params">(fn)</span>:</span></div><div class="line">    stored_results = &#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">memoized</span><span class="params">(*args)</span>:</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            <span class="comment"># try to get the cached result</span></div><div class="line">            <span class="keyword">return</span> stored_results[args]</div><div class="line">        <span class="keyword">except</span> KeyError:</div><div class="line">            <span class="comment"># nothing was cached for those args. let's fix that.</span></div><div class="line">            result = stored_results[args] = fn(*args)</div><div class="line">            <span class="keyword">return</span> result</div><div class="line">    <span class="keyword">return</span> memorized</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@memorize</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">return</span> n <span class="keyword">if</span> n <span class="keyword">in</span> [<span class="number">0</span>, <span class="number">1</span>] <span class="keyword">else</span> fib(n<span class="number">-2</span>) + fib(n<span class="number">-1</span>)</div></pre></td></tr></table></figure>
<p>è¿™æ ·çš„åšçš„è¯ï¼Œåœ¨åšé€’å½’çš„æ—¶å€™ï¼Œä¼šå…ˆçœ‹ä¸€ä¸‹è£…é¥°å™¨ä¸­æœ‰æ²¡æœ‰å‚¨å­˜ç›¸åº”çš„fibå€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æŠŠè®¡ç®—ç»“æœå‚¨å­˜åœ¨è£…é¥°å™¨é‡Œã€‚<br>è¿™æ ·åšé€’å½’å°±ä¸éœ€è¦å†å»é‡æ–°è®¡ç®—nä¹‹å‰çš„å€¼äº†ï¼Œå…¶å®ä¹Ÿå°±æ˜¯<code>é€’æ¨</code>æ€è·¯ã€‚</p>
<h4 id="ç®€å•ç²—æš´çš„å…¬å¼æ³•">ç®€å•ç²—æš´çš„å…¬å¼æ³•</h4><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨<a href="https://zh.wikipedia.org/wiki/æ–æ³¢é‚£å¥‘æ•°åˆ—" target="_blank" rel="external">æ•°å­¦å…¬å¼</a>è§£å†³ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> math</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib_2</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="string">'''formula for Fibonacci'''</span></div><div class="line">    sr5 = math.sqrt(<span class="number">5</span>)</div><div class="line">    y = (((<span class="number">1</span> + sr5) / <span class="number">2</span>) ** n - ((<span class="number">1</span> - sr5) / <span class="number">2</span>) ** n)/ sr5</div><div class="line">    <span class="keyword">return</span> y</div></pre></td></tr></table></figure>
<h4 id="çº¿æ€§ä»£æ•°">çº¿æ€§ä»£æ•°</h4><p>ç„¶è€Œå…¶å®æœ€é«˜æ•ˆå’Œå¿«é€Ÿçš„æ˜¯ç”¨<a href="https://zh.wikipedia.org/wiki/æ–æ³¢é‚£å¥‘æ•°åˆ—" target="_blank" rel="external">çº¿æ€§ä»£æ•°</a>æ¥è§£å†³.</p>
<p>å®ƒçš„æ¨æ¼”è¿‡ç¨‹å°±æ˜¯ï¼š</p>
<ol>
<li>f(2) = f(1)+f(0) </li>
<li>f(3) = f(2)+f(1)=2*f(1) + f(0)</li>
<li>f(4) = f(3) + f(2) = 3*f(1) + 2*f(0)</li>
</ol>
<p>â€¦â€¦</p>
<p>n+1. f(n) = f(n-1) + f(n-2) = A*f(1) + B*f(0)</p>
<p>å¦‚æœä»¥çŸ©é˜µè¡Œåˆ—å¼çš„æ–¹å¼æ¥è¡¨ç¤ºè¿™ç§æ¨æ¼”å°±æ˜¯å¦‚ä¸‹æ³¨é‡Šä¸­çš„å…¬å¼</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">çº¿æ€§ä»£æ•°è§£æ³•</div><div class="line">| Fn    |   | 1   1 |            |  1 |</div><div class="line">|       | = |       | ** (n-1) x |    |</div><div class="line">| Fn-1  |   | 1   0 |            |  0 |</div></pre></td></tr></table></figure>
<p>æˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€æ®µä»£ç å®ç°ä»£ç ï¼Œè¿™ä¸ªå®ç°æ–¹æ³•å†™å‡ºæ¥éå¸¸ä¸pythonicï¼Œå¯è¯»æ€§ä¹Ÿå¾ˆå·®ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib_3</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span></div><div class="line">    i = n - <span class="number">1</span></div><div class="line">    a,b = <span class="number">1</span>,<span class="number">0</span></div><div class="line">    c,d = <span class="number">0</span>,<span class="number">1</span></div><div class="line">    <span class="keyword">while</span> i &gt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">1</span>: <span class="comment"># è¿™ä¹Ÿæ˜¯ä¸€ä¸ªä¼˜åŒ–ï¼Œå°† a\*\*4 çš„é—®é¢˜ä¼˜åŒ–æˆ a\*\*2 * a**2</span></div><div class="line">            a,b = d\*b + c\*a, d\*(b + a) + c\*b</div><div class="line">        c,d = c\*\*<span class="number">2</span> + d\*\*<span class="number">2</span>, d\*(<span class="number">2</span>\*c + d)</div><div class="line">        i = i / <span class="number">2</span></div><div class="line">    <span class="keyword">return</span> a + b</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆåœ¨pythonä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨numpyçš„åº“ï¼Œè¿™ä¸ªåº“æ˜¯ä¸“é—¨ç”¨äºå®ç°é›†åˆçŸ©é˜µçš„è®¡ç®—ã€‚ä½¿ç”¨è¿™ä¸ªåº“ï¼Œæˆ‘ä»¬èƒ½éå¸¸æ–¹ä¾¿çš„å®ç°çŸ©é˜µçš„n-1æ¬¡æ–¹ã€‚<br>è€Œä¸”ä½¿ç”¨è¿™ç§æ–¹æ³•æ‰§è¡Œéå¸¸ä¹‹å¿«</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib_4</span><span class="params">(n)</span>:</span>    </div><div class="line">    m = np.matrix([[<span class="number">1</span>,<span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>]], object) <span class="comment"># æ³¨æ„è¿™é‡Œçš„ç±»å‹æ˜¯objectï¼Œå…¶ä»–ç±»å‹ä¼šæº¢å‡º</span></div><div class="line">    result = (m **(n<span class="number">-1</span>)) * [[<span class="number">1</span>], [<span class="number">0</span>]] </div><div class="line">    <span class="keyword">return</span> result[<span class="number">0</span>,<span class="number">0</span>]</div></pre></td></tr></table></figure>
<h3 id="æµ‹è¯•">æµ‹è¯•</h3><p>é‚£ä¹ˆæ¥ä¸‹æ¥æ¥å¸®ç½—é©¬æ•™ä¸»è®¡ç®—ä¸€ä¸‹ç¬¬ä¸€ç™¾ä¸‡ä¸ªFibonacciæ•°ï¼Œ<br>åŒæ—¶æµ‹è¯•ä¸€ä¸‹å„ç®—æ³•çš„ä¼˜åŠ£ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">python -m timeit <span class="string">'import fib\_test'</span> <span class="string">'fib_test.fib(1000000)'</span></div><div class="line">RuntimeError: maximum recursion depth exceeded</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>åŸå§‹é€’å½’åŠ è£…é¥°å™¨</code>çš„æ–¹å¼ç›´æ¥è¶…å‡ºpythonçš„å¯é€’å½’èŒƒå›´ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">python -m timeit <span class="string">'import fib\_test'</span> <span class="string">'fib_test.fib\_2(1000000)'</span></div><div class="line">OverflowError: (<span class="number">34</span>, <span class="string">'Result too large'</span>)</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>æ•°å­¦å…¬å¼</code>çš„æ–¹å¼ç›´æ¥æº¢å‡ºã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">python -m timeit <span class="string">'import fib\_test'</span> <span class="string">'fib_test.fib\_2(1000000)'</span></div><div class="line">  File <span class="string">"./fib\_test.py"</span>, line <span class="number">31</span>, <span class="keyword">in</span> fib_1</div><div class="line">    a, b = b, a + b</div><div class="line">KeyboardInterrupt</div></pre></td></tr></table></figure>
<p>ç¨‹åºè¿›å…¥å¾ªç¯ï¼Œæ€§èƒ½å¾ˆæ…¢ï¼Œè¢«æˆ‘ç›´æ¥ä¸­æ–­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">python -m timeit -s <span class="string">'import fib\_test'</span> <span class="string">'fib\_test.fib_3(1000000)'</span></div><div class="line"><span class="number">10</span> loops, best of <span class="number">3</span>: <span class="number">262</span> msec per loop</div></pre></td></tr></table></figure>
<p>ç”¨<code>çº¿æ€§ä»£æ•°</code>å®ç°çš„æ–¹å¼è€—æ—¶<em>262ms</em>ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">python -m timeit -s <span class="string">'import fib\_test'</span> <span class="string">'fib\_test.fib_4(1000000)'</span></div><div class="line"><span class="number">10</span> loops, best of <span class="number">3</span>: <span class="number">403</span> msec per loop</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>numpyåº“çº¿æ€§ä»£æ•°</code>çš„æ–¹å¼è€—æ—¶<em>403ms</em>ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºåœ¨<code>çº¿æ€§ä»£æ•°</code>å­˜åœ¨ä¸€ä¸ªä¼˜åŒ–å°±æ˜¯ï¼šå°† a**4 çš„é—®é¢˜ä¼˜åŒ–æˆ a**2 <em> a*</em>2ï¼ŒæŠŠè®¡ç®—é‡2næ¬¡æ–¹ç®€åŒ–åˆ°næ¬¡æ–¹ã€‚</p>
<h3 id="åè®°">åè®°</h3><p>è¿™æ˜¯æœ€è¿‘ç ”ç©¶numpyå’Œç®—æ³•åçš„ä¸€ç‚¹ç‚¹å°çš„å¿ƒå¾—ä½“ä¼šï¼Œå·²ä½œè®°å½•ã€‚</p>
<hr>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/03/17/design pattern in python/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Design Pattern in Python
        
      </div>
    </a>
  
  
    <a href="/2015/10/17/nsd 2 lab/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">NSD Lab2 Report</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">åˆ†äº«åˆ°ï¼š</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- å¤šè¯´è¯„è®ºæ¡† start -->
	<div class="ds-thread" data-thread-key="fib" data-title="åœ¨Pythonä¸­è§£å†³Fibé—®é¢˜çš„å¤šç§æ–¹æ³•" data-url="http://yoursite.com/2015/10/25/fib/"></div>
	<!-- å¤šè¯´è¯„è®ºæ¡† end -->
	<!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"joshpat"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->
</div>



</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Zhou Quan
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/mobile.js"></script>
<script src="/js/main.js"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>